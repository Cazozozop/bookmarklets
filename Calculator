javascript:(function(){if(document.getElementById('mini-calc'))return;const css="#mini-calc{position:fixed;top:20px;left:20px;background:#222;color:#0f0;font-family:sans-serif;z-index:999999;border:2px solid #0f0;border-radius:8px;padding:10px;box-shadow:0 0 10px #0f08;width:280px;user-select:none;cursor:move}#mini-calc input{width:100%;background:#111;color:#0f0;border:none;border-radius:4px;padding:5px;font-size:18px;margin-bottom:8px;text-align:right}#mini-calc button{background:#0f0;color:#000;border:none;border-radius:4px;padding:8px;margin:2px;width:42px;cursor:pointer;font-weight:bold;user-select:none}#mini-calc .close{position:absolute;top:5px;right:7px;color:#0f0;font-weight:bold;font-size:18px;cursor:pointer;user-select:none}#mini-calc .buttons{display:flex;flex-wrap:wrap;justify-content:center;}";const style=document.createElement("style");style.textContent=css;document.head.appendChild(style);const calc=document.createElement("div");calc.id="mini-calc";calc.innerHTML='<div class="close" title="Close">âœ–</div><input type="text" id="calc-display" value=""><div class="buttons"></div>';document.body.appendChild(calc);const closeBtn=calc.querySelector(".close");closeBtn.onclick=()=>{style.remove();calc.remove()};const buttons=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","^","sin","cos","tan","=","+","C"];const btnContainer=calc.querySelector(".buttons");const disp=calc.querySelector("#calc-display");function toRadians(deg){return deg*Math.PI/180}function tokenize(expr){return expr.match(/sin|cos|tan|[+\-*/^()]|\d*\.?\d+/g)||[]}function parseExpression(tokens){let pos=0;function parsePrimary(){let token=tokens[pos];if(token==="("){pos++;let val=parseAddSub();if(tokens[pos]!==")")throw"Expected )";pos++;return val}else if(/^\d/.test(token)){pos++;return parseFloat(token)}else if(/sin|cos|tan/.test(token)){pos++;if(tokens[pos]!=="(")throw"Expected (";pos++;let val=parseAddSub();if(tokens[pos]!==")")throw"Expected )";pos++;if(token==="sin")return Math.sin(val);if(token==="cos")return Math.cos(val);if(token==="tan")return Math.tan(val)}throw"Unexpected token "+token}function parsePow(){let left=parsePrimary();while(tokens[pos]==="^"){pos++;let right=parsePrimary();left=Math.pow(left,right)}return left}function parseMulDiv(){let left=parsePow();while(tokens[pos]==="*"||tokens[pos]==="/"){let op=tokens[pos];pos++;let right=parsePow();if(op==="*")left*=right;else left/=right}return left}function parseAddSub(){let left=parseMulDiv();while(tokens[pos]==="+"||tokens[pos]==="-"){let op=tokens[pos];pos++;let right=parseMulDiv();if(op==="+")left+=right;else left-=right}return left}return parseAddSub()}function safeEval(expr){try{let tokens=tokenize(expr.replace(/\s+/g,""));let result=parseExpression(tokens);if(isNaN(result))return"Error";return Math.round(result*1e12)/1e12}catch{return"Error"}}buttons.forEach(b=>{const btn=document.createElement("button");btn.textContent=b;btn.onclick=()=>{if(b==="="){disp.value=safeEval(disp.value)}else if(b==="C"){disp.value=""}else{if(disp.value==="Error")disp.value="";disp.value+=b}};btnContainer.appendChild(btn)});let drag=false,sx,sy,ox,oy;calc.style.cursor="move";calc.addEventListener("mousedown",e=>{if(e.target.tagName==="BUTTON"||e.target===disp||e.target.classList.contains("close"))return;drag=true;sx=e.clientX;sy=e.clientY;const r=calc.getBoundingClientRect();ox=r.left;oy=r.top;e.preventDefault()});window.addEventListener("mousemove",e=>{if(!drag)return;let nx=ox+(e.clientX-sx);let ny=oy+(e.clientY-sy);nx=Math.min(window.innerWidth-calc.offsetWidth,Math.max(0,nx));ny=Math.min(window.innerHeight-calc.offsetHeight,Math.max(0,ny));calc.style.left=nx+"px";calc.style.top=ny+"px"});window.addEventListener("mouseup",()=>{drag=false})})();
